const ProgramsApp=function(){"use strict";let e=[],t="";const s=()=>{const e=document.getElementById("toggle-all-btn");e&&e.addEventListener("click",l)},l=()=>{const e=document.querySelectorAll(".location-row"),t=Array.from(e).every(e=>e.classList.contains("collapsed"));e.forEach(e=>{t?(e.classList.remove("collapsed"),e.classList.add("expanded")):(e.classList.remove("expanded"),e.classList.add("collapsed"))}),o()},o=()=>{const e=document.getElementById("toggle-all-btn");if(!e)return;const t=document.querySelectorAll(".location-row"),s=Array.from(t).every(e=>e.classList.contains("collapsed"));e.textContent=s?"Expand All":"Collapse All"},a=()=>{const e={open:0,waitlist:1,"coming-soon":2,full:3,closed:4};document.querySelectorAll(".location-group").forEach(t=>{const s=Array.from(t.querySelectorAll(".session-row"));0!==s.length&&(s.sort((t,s)=>{const l=e[t.dataset.status]||9,o=e[s.dataset.status]||9;if(l!==o)return l-o;const a=(t.querySelector(".session-module")||{}).textContent||"",n=(s.querySelector(".session-module")||{}).textContent||"",i=a.trim().localeCompare(n.trim());if(0!==i)return i;const r=t.dataset.startDate||"",d=s.dataset.startDate||"";return r.localeCompare(d)}),s.forEach(e=>t.appendChild(e)))})},n=()=>{BEMUtils.initFilters(i)},i=()=>{const e=BEMUtils.getFilterValues();let t=0;document.querySelectorAll(".location-group").forEach(s=>{const l=s.querySelectorAll(".session-row");let o=0;l.forEach(t=>{BEMUtils.rowMatchesFilters(t,e)?(t.style.display="",o++):t.style.display="none"});s.querySelector(".location-row")&&(s.style.display=0===o?"none":""),t+=o}),BEMUtils.toggleNoResults(t)},r=()=>{document.querySelectorAll(".session-row").forEach(e=>{e.addEventListener("click",t=>{if(t.target.closest(".action-cell a, .action-cell span"))return;const s=e.dataset.id;s&&m(s)})})},d=()=>{BEMUtils.initModalClose("detail-modal",u)},c=e=>{const[t,s,l]=e.split("-").map(e=>parseInt(e,10));return new Date(t,s-1,l)},m=s=>{const l=e.find(e=>e.id===s);if(!l)return;const o=(e,t)=>{const s=document.getElementById(e);s&&(s.textContent=t)},a=document.getElementById("detail-image");a&&(a.src=t+l.image),o("detail-title",l.title),o("detail-program",l.program+" â€¢ "+l.format),o("detail-description",l.description);const n=document.getElementById("detail-badge");n&&(n.className="class-badge badge-"+l.status,"open"===l.status?n.textContent="Open - "+l.class_size.spots_available+" spots available":"waitlist"===l.status?n.textContent="Waitlist Available":"full"===l.status?n.textContent="Full":"closed"===l.status?n.textContent="Closed":n.textContent="Coming Soon");const i=document.getElementById("detail-module-section");if(i)if(l.module_info){i.style.display="block",o("detail-module-info",l.module_info),o("detail-additional-modules",l.additional_modules||""),o("detail-registration-note",l.registration_note||"");const e=document.getElementById("detail-program-link");e&&(l.program_link?(e.href=l.program_link,e.style.display="inline-block"):e.style.display="none")}else i.style.display="none";const r=(e,t)=>{const s=document.getElementById(e);s&&t&&(s.innerHTML="",t.forEach(e=>{const t=document.createElement("li");t.textContent=e,s.appendChild(t)}))};r("detail-learning",l.what_students_learn),r("detail-requirements",l.requirements),o("detail-location",l.location),o("detail-address",l.address),o("detail-schedule-days",l.schedule.days),o("detail-schedule-time",l.schedule.time);o("detail-dates",c(l.schedule.start_date).toLocaleDateString("en-US",{month:"short",day:"numeric"})+" - "+c(l.schedule.end_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})),o("detail-grades","Grades "+l.grades),o("detail-class-size",l.class_size.min+"-"+l.class_size.max+" students"),o("detail-instructor",l.instructor),o("detail-price",l.price),o("detail-price-note",l.price_note);const d=document.getElementById("detail-register-btn");d&&("open"===l.status&&l.register_url?(d.href=l.register_url,d.textContent="Register Now",d.className="btn btn-primary",d.target="_blank",d.rel="noopener noreferrer"):(d.href=t+"waitlist/",d.textContent="Join Waitlist",d.className="btn btn-waitlist",d.removeAttribute("target"),d.removeAttribute("rel")));const m=document.getElementById("detail-modal");m&&(m.classList.add("active"),document.body.style.overflow="hidden")},u=()=>{const e=document.getElementById("detail-modal");e&&(e.classList.remove("active"),document.body.style.overflow="auto")};return{init:(l,o)=>{e=l,t=o||"",a(),n(),r(),s(),d()},toggleLocation:e=>{e.classList.contains("expanded")?(e.classList.remove("expanded"),e.classList.add("collapsed")):(e.classList.remove("collapsed"),e.classList.add("expanded")),o()},showDetail:m,closeDetail:u}}();