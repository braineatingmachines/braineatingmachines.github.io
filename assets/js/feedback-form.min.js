!function(){"use strict";let e=1;const t=document.getElementById("feedback-form"),o=document.getElementById("progress-bar"),n=document.getElementById("progress-text"),r=document.getElementById("progress-percentage"),s=document.getElementById("error-message"),d=document.getElementById("submit-btn"),c=document.getElementById("submit-text"),i=document.getElementById("submit-loading");function a(){document.querySelectorAll(".next-step").forEach(t=>{t.addEventListener("click",()=>{u()&&l(e+1)})}),document.querySelectorAll(".prev-step").forEach(t=>{t.addEventListener("click",()=>{l(e-1)})}),t.addEventListener("submit",h),function(){const e=document.getElementById("hear-about-other"),t=document.getElementById("hear-about-other-text");e&&t&&e.addEventListener("change",function(){this.checked?(t.classList.remove("hidden"),t.focus()):(t.classList.add("hidden"),t.value="")});const o=document.getElementById("programs-other"),n=document.getElementById("programs-other-text");o&&n&&o.addEventListener("change",function(){this.checked?(n.classList.remove("hidden"),n.focus()):(n.classList.add("hidden"),n.value="")})}(),m()}function l(t){if(t<1||t>3)return;document.querySelectorAll(".form-step").forEach(e=>{e.classList.remove("active")});const o=document.querySelector(`[data-step="${t}"]`);o&&(o.classList.add("active"),e=t,m(),window.scrollTo({top:0,behavior:"smooth"}))}function m(){const t=(e-1)/2*100;o.style.width=`${t}%`,n.textContent=`Step ${e} of 3`,r.textContent=`${Math.round(t)}%`}function u(){const t=document.querySelector(`[data-step="${e}"]`);if(!t)return!1;const o=t.querySelectorAll("[required]");let n=!0;return o.forEach(e=>{if("radio"===e.type){const o=t.querySelectorAll(`[name="${e.name}"]`);if(!Array.from(o).some(e=>e.checked)){n=!1;const t=e.closest(".form-question");t&&(t.style.border="2px solid #EF4444",t.style.borderRadius="0.5rem",t.style.padding="1rem",setTimeout(()=>{t.style.border="",t.style.padding=""},2e3))}}else e.value.trim()||(n=!1,e.style.borderColor="#EF4444",setTimeout(()=>{e.style.borderColor=""},2e3))}),n||alert("Please answer all required questions before continuing."),n}async function h(e){if(e.preventDefault(),u()){d.disabled=!0,c.classList.add("hidden"),i.classList.remove("hidden"),s.classList.add("hidden");try{const e=function(){const e=new FormData(t),o={};for(const[t,n]of e.entries())if(t.endsWith("[]")){const e=t.replace("[]","");o[e]||(o[e]=[]),o[e].push(n)}else o[t]=n;return["parent_additional_programs"].forEach(e=>{o[e]||(o[e]=[])}),o}();if(!(await fetch("https://feedback-form-handler.spikeprimegit.workers.dev",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw new Error("Submission failed");window.location.href="/program-feedback-thank-you/"}catch(e){console.error("Form submission error:",e),s.classList.remove("hidden"),d.disabled=!1,c.classList.remove("hidden"),i.classList.add("hidden"),s.scrollIntoView({behavior:"smooth",block:"center"})}}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",a):a()}();